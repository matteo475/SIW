<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Benvenuti su Amazzon</title>
	<link href="/css/stileIndex.css" rel="stylesheet" type="text/css">
</head>

<body>

	<div>
	    <h2>Reimposta la tua password</h2>
	</div>
	
	<form th:action="@{/reimposta_password}" method="post" style="max-width: 350px; margin: 0 auto;">
	    <input type="hidden" name="token" th:value="${token}" />
	    <div class="border border-secondary rounded p-3">
	        <p>
	            <input type="password" name="password" id="password" class="form-control"
	                placeholder="Inserisci la nuova password" required autofocus />
	        </p>         
	        <p>
	            <input type="password" class="form-control" placeholder="Conferma la nuova password"
	                required oninput="checkPasswordMatch(this);" />
	        </p>         
	        <p class="text-center">
	            <input type="submit" value="Cambia password" class="btn btn-primary" />
	        </p>
	    </div>
	</form>
	
	<script>
		function checkPasswordMatch(fieldConfirmPassword) {
		    const password = document.getElementById("password").value;
		    if (fieldConfirmPassword.value !== password) {
		        fieldConfirmPassword.setCustomValidity("Le password non coincidono!");
		    } else {
		        fieldConfirmPassword.setCustomValidity("");
		    }
		}
	</script>

</body>
</html>
