<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Amazzon | Reimposta Password</title>
	<link href="/css/stileIndex.css" rel="stylesheet" type="text/css" />
	<link href="/css/stileResetPasswordForm.css" rel="stylesheet" type="text/css" />

</head>

<body>
	<!-- Navbar -->
	<div class="navbar">
		<div class="nav-links">
			<a href="/">Home</a>
			<a href="/prodotti">Prodotti</a>
			<a href="/categorie">Categorie</a>
			<a href="/contatti">Contatti</a>
		</div>
	</div>

	<!-- Form Reimposta Password -->
	<div class="form-card">
		<h2>Reimposta la tua password</h2>

		<div th:if="${message != null}" class="error-message">
			<p th:text="${message}"></p>
		</div>

		<form th:action="@{/reimposta_password}" method="post">
			<input type="hidden" name="token" th:value="${token}" />

			<input type="password" id="password" name="password" placeholder="Nuova password" required autofocus />

			<input type="password" placeholder="Conferma password" required oninput="checkPasswordMatch(this);" />

			<input type="submit" value="Cambia password" />
		</form>
	</div>

	<script>
		function checkPasswordMatch(confirmField) {
			const pwd = document.getElementById("password").value;
			if (confirmField.value !== pwd) {
				confirmField.setCustomValidity("Le password non coincidono!");
			} else {
				confirmField.setCustomValidity("");
			}
		}
	</script>
</body>

</html>